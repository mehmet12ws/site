<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turnstile API İsteği</title>
</head>
<body>
    <h2>Turnstile Çözümü İsteği Gönder</h2>

    <form id="apiForm">
        <label for="apiKey">2Captcha API Key:</label>
        <input type="text" id="apiKey" name="apiKey" required><br><br>

        <button type="submit">İstek Gönder</button>
    </form>

    <div id="loadingMessage" style="display:none;">İşlem yapılıyor, lütfen bekleyin...</div>
    <div id="taskIdMessage" style="display:none;"></div>
    <div id="result"></div>

    <script>
        document.getElementById('apiForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const apiKey = document.getElementById('apiKey').value;

            // Yükleniyor mesajını göster
            document.getElementById('loadingMessage').style.display = 'block';
            document.getElementById('result').innerText = '';
            document.getElementById('taskIdMessage').style.display = 'none';

            // 2Captcha API isteği
            const createTaskUrl = "https://2captcha.com/in.php";
            const requestBody = `method=turnstile&key=${encodeURIComponent(apiKey)}&sitekey=0x4AAAAAAABFlgIgsFUIYITx&pageurl=https://me.miniclip.com/login&json=1`;

            // Görev oluşturma isteği gönder
            fetch(createTaskUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: requestBody
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 1) {
                    const taskId = data.request;

                    // Görev ID'sini göster
                    document.getElementById('taskIdMessage').style.display = 'block';
                    document.getElementById('taskIdMessage').innerText = `Görev ID'si: ${taskId}`;

                    // Görev sonucu almak için bekleme
                    setTimeout(() => {
                        const getResultUrl = `https://2captcha.com/res.php?key=${encodeURIComponent(apiKey)}&action=get&id=${taskId}&json=1`;

                        // Sonuç isteğini gönder
                        fetch(getResultUrl)
                        .then(response => response.json())
                        .then(resultData => {
                            document.getElementById('loadingMessage').style.display = 'none'; // Yükleniyor mesajını gizle

                            if (resultData.status === 1) {
                                document.getElementById('result').innerText = 'Çözüm: ' + resultData.request;
                            } else {
                                document.getElementById('result').innerText = 'Hata: ' + resultData.request;
                            }
                        })
                        .catch(error => {
                            document.getElementById('loadingMessage').style.display = 'none'; // Yükleniyor mesajını gizle
                            document.getElementById('result').innerText = 'Bir hata oluştu: ' + error;
                        });
                    }, 20000); // 20 saniye bekle
                } else {
                    document.getElementById('loadingMessage').style.display = 'none'; // Yükleniyor mesajını gizle
                    document.getElementById('result').innerText = 'Görev oluşturulamadı: ' + data.request;
                }
            })
            .catch(error => {
                document.getElementById('loadingMessage').style.display = 'none'; // Yükleniyor mesajını gizle
                document.getElementById('result').innerText = 'Bir hata oluştu: ' + error;
            });
        });
    </script>
</body>
</html>
